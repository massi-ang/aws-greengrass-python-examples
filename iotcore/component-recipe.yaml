---
RecipeFormatVersion: 2020-01-25
ComponentName: _NAME_
ComponentVersion: _VERSION_
ComponentDescription: _DESCRIPTION_
ComponentPublisher: _PUBLISHER_
ComponentDependencies: {}
ComponentConfiguration:
  DefaultConfiguration:
    accessControl:
      aws.greengrass.ipc.mqttproxy: 
        policy_1:
          policyDescription: My policy
          operations:
            - "*"
          resources:
            - "*"
    CloudTopics: 
      - test/send
      - test/receive
Manifests:
  - Platform:
      os: /linux|darwin/
    Lifecycle:
      Install: |-
        python3 -m venv venv
        . venv/bin/activate
        pip3 install --upgrade pip
        python3 -m pip install --upgrade setuptools
        pip3 install wheel
        pip3 install --no-cache-dir {artifacts:path}/greengrassipcsdk-1.0.1.tar.gz
      Run: 
        Script: |-
          . venv/bin/activate
          python3 -u {artifacts:path}/pubsub.py
    Artifacts:
      - Uri: s3://_BUCKET_/_NAME_/_VERSION_/pubsub.py
      - Uri: s3://_BUCKET_/_NAME_/_VERSION_/greengrassipcsdk-1.0.1.tar.gz        
  